<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Valentinsfrage</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Space+Grotesk:wght@400;500;600&display=swap");

      :root {
        --night: #0f0f1b;
        --glow: #ff7aa2;
        --mint: #93f1d7;
        --cream: #fff5eb;
        --hot: #ff3b6a;
        --shadow: 0 24px 50px rgba(15, 15, 27, 0.35);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Space Grotesk", "Segoe UI", sans-serif;
        color: var(--cream);
        background:
          radial-gradient(circle at 20% 20%, rgba(255, 122, 162, 0.25), transparent 45%),
          radial-gradient(circle at 80% 10%, rgba(147, 241, 215, 0.2), transparent 40%),
          linear-gradient(130deg, #0f0f1b 0%, #1a1024 45%, #1b1f3b 100%);
        overflow: hidden;
      }

      .scene {
        position: relative;
        min-height: 100vh;
        display: grid;
        place-items: center;
        padding: 40px 18px;
      }

      .glow-orb {
        position: absolute;
        width: 420px;
        height: 420px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(255, 122, 162, 0.25), transparent 70%);
        filter: blur(12px);
        animation: drift 12s ease-in-out infinite;
      }

      .glow-orb:nth-child(1) {
        top: -120px;
        left: -80px;
      }

      .glow-orb:nth-child(2) {
        bottom: -160px;
        right: -100px;
        animation-delay: 2s;
      }

      .card {
        position: relative;
        width: min(560px, 92vw);
        padding: 36px 30px 34px;
        border-radius: 26px;
        background: rgba(20, 20, 38, 0.86);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: var(--shadow);
        text-align: center;
        backdrop-filter: blur(18px);
        animation: popIn 0.9s ease both;
      }

      h1 {
        margin: 0 0 12px;
        font-family: "Fraunces", "Georgia", serif;
        font-size: clamp(2.3rem, 6vw, 3.4rem);
        letter-spacing: 0.01em;
      }

      .sub {
        margin: 0 0 28px;
        font-size: 1.05rem;
        line-height: 1.6;
        color: rgba(255, 245, 235, 0.85);
      }

      .arena {
        position: relative;
        width: 100%;
        height: 240px;
        margin: 10px auto 0;
        display: grid;
        place-items: center;
      }

      .buttons {
        position: relative;
        display: grid;
        place-items: center;
        width: min(420px, 90vw);
        height: 72px;
        z-index: 1;
      }

      button {
        border: none;
        border-radius: 999px;
        font-size: 1rem;
        font-weight: 600;
        padding: 14px 26px;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .yes {
        position: relative;
        z-index: 2;
        background: linear-gradient(135deg, #ff3b6a, #ff7aa2);
        color: white;
        box-shadow: 0 14px 28px rgba(255, 59, 106, 0.3);
      }

      .no {
        position: absolute;
        z-index: 3;
        background: rgba(255, 255, 255, 0.1);
        color: var(--cream);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 12px 24px rgba(15, 15, 27, 0.35);
        transition: transform 0.28s ease, left 0.28s ease, top 0.28s ease;
        will-change: transform, left, top;
      }

      button:hover {
        transform: translateY(-2px);
      }

      .result {
        margin-top: 22px;
        min-height: 28px;
        font-size: 1.45rem;
        color: var(--mint);
        font-weight: 600;
      }

      .audio-hint {
        margin-top: 14px;
        font-size: 0.95rem;
        color: rgba(255, 245, 235, 0.75);
      }

      .audio-btn {
        margin-top: 8px;
        background: rgba(255, 255, 255, 0.12);
        color: var(--cream);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 999px;
        padding: 10px 20px;
        font-weight: 600;
        cursor: pointer;
      }

      .spark {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--mint);
        opacity: 0;
        animation: sparkle 1.2s ease forwards;
      }

      .burst-heart {
        position: absolute;
        width: 14px;
        height: 14px;
        background: var(--glow);
        transform: rotate(45deg);
        animation: heartBurst 1.8s ease forwards;
      }

      .burst-heart::before,
      .burst-heart::after {
        content: "";
        position: absolute;
        width: 14px;
        height: 14px;
        background: inherit;
        border-radius: 50%;
      }

      .burst-heart::before {
        left: -7px;
      }

      .burst-heart::after {
        top: -7px;
      }

      @keyframes drift {
        0%,
        100% {
          transform: translate(0, 0);
        }
        50% {
          transform: translate(30px, -20px);
        }
      }

      @keyframes popIn {
        from {
          opacity: 0;
          transform: translateY(18px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      @keyframes sparkle {
        0% {
          transform: scale(0.6);
          opacity: 0;
        }
        20% {
          opacity: 1;
        }
        100% {
          transform: translateY(-30px) scale(1.4);
          opacity: 0;
        }
      }

      @keyframes heartBurst {
        0% {
          transform: translate(0, 0) rotate(45deg) scale(0.6);
          opacity: 0;
        }
        20% {
          opacity: 1;
        }
        100% {
          transform: translate(var(--x), var(--y)) rotate(45deg) scale(1.2);
          opacity: 0;
        }
      }

      @media (max-width: 520px) {
        .arena {
          height: 260px;
        }
      }
    </style>
  </head>
  <body>
    <div class="scene">
      <div class="glow-orb"></div>
      <div class="glow-orb"></div>

      <main class="card">
        <h1>Hey Adanna, Willst du mein Valentine sein?</h1>
        <p class="sub">Und dich mit mir in Koblenz treffen - Samstag, den 14. Februar?</p>

        <div class="arena" id="arena">
          <div class="buttons">
            <button class="yes" id="yesBtn" type="button">Ja</button>
          </div>
          <button class="no" id="noBtn" type="button">Nein</button>
        </div>

        <div class="result" id="result"></div>
      </main>
    </div>

    <audio id="bgAudio" autoplay loop muted playsinline>
      <source src="audio/audio.mp3" type="audio/mpeg" />
    </audio>

    <script>
      const arena = document.getElementById("arena");
      const noBtn = document.getElementById("noBtn");
      const yesBtn = document.getElementById("yesBtn");
      const result = document.getElementById("result");
      const bgAudio = document.getElementById("bgAudio");
      let noLastMove = 0;
      if (bgAudio) bgAudio.volume = 0.18;

      const moveNoButton = () => {
        const arenaRect = arena.getBoundingClientRect();
        const btnRect = noBtn.getBoundingClientRect();
        const yesRect = yesBtn.getBoundingClientRect();
        const padding = 8;
        const maxX = arenaRect.width - btnRect.width - padding;
        const maxY = arenaRect.height - btnRect.height - padding;
        const minDistance = 120;
        let x = padding;
        let y = padding;
        let attempts = 0;

        do {
          x = padding + Math.random() * Math.max(0, maxX);
          y = padding + Math.random() * Math.max(0, maxY);
          const noCenterX = arenaRect.left + x + btnRect.width / 2;
          const noCenterY = arenaRect.top + y + btnRect.height / 2;
          const yesCenterX = yesRect.left + yesRect.width / 2;
          const yesCenterY = yesRect.top + yesRect.height / 2;
          const distance = Math.hypot(noCenterX - yesCenterX, noCenterY - yesCenterY);
          if (distance >= minDistance) break;
          attempts += 1;
        } while (attempts < 16);

        noBtn.style.left = `${x}px`;
        noBtn.style.top = `${y}px`;
        noBtn.style.transform = "translate(0, 0)";
      };

      const spark = (x, y) => {
        const dot = document.createElement("span");
        dot.className = "spark";
        dot.style.left = `${x}px`;
        dot.style.top = `${y}px`;
        arena.appendChild(dot);
        setTimeout(() => dot.remove(), 1200);
      };

      const heartBurst = (x, y) => {
        const count = 24;
        for (let i = 0; i < count; i += 1) {
          const heart = document.createElement("span");
          heart.className = "burst-heart";
          const angle = Math.random() * Math.PI * 2;
          const distance = 40 + Math.random() * 90;
          const offsetX = Math.cos(angle) * distance;
          const offsetY = Math.sin(angle) * distance - 40;
          heart.style.left = `${x}px`;
          heart.style.top = `${y}px`;
          heart.style.setProperty("--x", `${offsetX}px`);
          heart.style.setProperty("--y", `${offsetY}px`);
          arena.appendChild(heart);
          setTimeout(() => heart.remove(), 1800);
        }
      };

      const handleNoDodge = () => {
        const now = Date.now();
        if (now - noLastMove < 120) return;
        noLastMove = now;
        moveNoButton();
      };

      const checkDistance = (clientX, clientY) => {
        const btnRect = noBtn.getBoundingClientRect();
        const dx = clientX - (btnRect.left + btnRect.width / 2);
        const dy = clientY - (btnRect.top + btnRect.height / 2);
        const distance = Math.hypot(dx, dy);
        if (distance < 150) {
          handleNoDodge();
        }
      };

      arena.addEventListener("pointermove", (event) => {
        checkDistance(event.clientX, event.clientY);
      });

      arena.addEventListener("touchmove", (event) => {
        if (!event.touches || event.touches.length === 0) return;
        const touch = event.touches[0];
        checkDistance(touch.clientX, touch.clientY);
      }, { passive: true });

      noBtn.addEventListener("mouseenter", handleNoDodge);
      noBtn.addEventListener("click", handleNoDodge);
      noBtn.addEventListener("touchstart", (event) => {
        event.preventDefault();
        handleNoDodge();
      });

      yesBtn.addEventListener("click", (event) => {
        result.textContent = "Yayyyyy!!! Ich freue mich riesig auf dich baby.";
        const arenaRect = arena.getBoundingClientRect();
        const x = event.clientX - arenaRect.left;
        const y = event.clientY - arenaRect.top;
        spark(x, y);
        heartBurst(x, y);
      });

      const tryPlayAudio = () => {
        if (!bgAudio) return;
        bgAudio.play().catch(() => {});
      };

      window.addEventListener("load", () => {
        moveNoButton();
        tryPlayAudio();
      });

      document.addEventListener("pointerdown", () => {
        if (!bgAudio) return;
        if (bgAudio.muted) bgAudio.muted = false;
        tryPlayAudio();
      }, { once: true });
    </script>
  </body>
</html>
